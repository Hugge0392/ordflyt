Jag ser varfÃ¶r du kÃ¶r fast: du har gjort jÃ¤ttemÃ¥nga overrides i din CSS (bl.a. fÃ¶r .prose, .reading-content.accessibility-enhanced, .navigation-button, m.m.), och just nu konkurrerar de med varandra. DÃ¤rfÃ¶r blir det â€œvita plattorâ€ eller att dina instÃ¤llningar inte biter.

FÃ¶r att lÃ¶sa ditt fÃ¶rsta problem (att bakgrunder dyker upp fast du bara vill ha texten i fokuslÃ¤get ren och utan vita rutor) kan du bÃ¶rja med en enkel â€œkillswitchâ€:

1. LÃ¤gg allt bakgrundsansvar pÃ¥ containern

Du har redan detta, men fÃ¶renkla det sÃ¥ hÃ¤r:

.reading-content.accessibility-enhanced {
  background-color: var(--accessibility-bg-color) !important;
  color: var(--accessibility-text-color) !important;
  border-color: var(--accessibility-border-color) !important;
}

2. Nolla alla barns bakgrunder

I stÃ¤llet fÃ¶r 20 olika selektorer kan du ha en tydlig reset:

.reading-content.accessibility-enhanced *:not(img):not(video):not(canvas) {
  background: transparent !important;
  box-shadow: none !important;
}


Vill du Ã¤ven blockera pseudo-element:

.reading-content.accessibility-enhanced *::before,
.reading-content.accessibility-enhanced *::after {
  background: transparent !important;
  box-shadow: none !important;
}

3. SÃ¤tt textfÃ¤rg pÃ¥ allt

Du har mÃ¥nga duplicerade regler. Det rÃ¤cker med:

.reading-content.accessibility-enhanced,
.reading-content.accessibility-enhanced * {
  color: var(--accessibility-text-color) !important;
  font-family: var(--accessibility-font-family) !important;
  font-size: var(--accessibility-font-size) !important;
  line-height: var(--accessibility-line-height) !important;
}

4. UI-element (knappar, indikatorer, progressbar)

De verkar du vilja isolera (inte pÃ¥verkas av accessibility-instÃ¤llningar). DÃ¥ Ã¤r bÃ¤sta vÃ¤gen att ge dem en egen klass (vilket du redan gjort med .unique-prev-question-btn, .navigation-page-counter osv.) och sÃ¤tta dem sist i CSS, med en neutral vit/svart styling.

ğŸ‘‰ Kort sagt: lÃ¶sningen Ã¤r att rensa bort 80% av duplicerade overrides och ersÃ¤tta med tre enkla block:

Container â†’ ansvarar fÃ¶r bakgrund.

Reset fÃ¶r alla barn â†’ inga bakgrunder.

Text override â†’ fÃ¤rg, font, line-height.

Vill du att jag ska skriva en slimmad version av din CSS (typ 50 rader i stÃ¤llet fÃ¶r 700) som lÃ¶ser just accessibility-fallet, utan att sabba Tailwind/shadcn?