Tack fÃ¶r koden â€“ jag ser varfÃ¶r det fortfarande â€œinte funkarâ€.

Grundproblemet: din text-wrapper (textRef) har zIndex: 10 och transform: "translateZ(0)" (skapar ny stacking context), medan overlayn (focus-overlay-container + .rf-scrim/.rf-frame) inte har varken position eller z-index. DÃ¥ hamnar overlayn under texten â†’ ser ut som att inget hÃ¤nder.

HÃ¤r Ã¤r en minimal, konkret patch (2 smÃ¥ Ã¤ndringar) som gÃ¶r overlayn synlig direkt:

1) Ge overlayn position + z-index (Tailwind-variant, enklast)

Byt ut overlay-blocket till det hÃ¤r (samma plats som idag):

{readingFocusMode && focusRect && (
  <div className={`absolute inset-0 pointer-events-none z-[100] focus-${focusAnimationState}`}>
    {/* TOP */}
    <div
      className="absolute bg-black/60"
      aria-hidden
      style={{ top: 0, left: 0, right: 0, height: `${focusRect.top}px` }}
    />
    {/* BOTTOM */}
    <div
      className="absolute bg-black/60"
      aria-hidden
      style={{ top: `${focusRect.top + focusRect.height}px`, left: 0, right: 0, bottom: 0 }}
    />
    {/* LEFT */}
    <div
      className="absolute bg-black/60"
      aria-hidden
      style={{ top: `${focusRect.top}px`, left: 0, width: `${focusRect.left}px`, height: `${focusRect.height}px` }}
    />
    {/* RIGHT */}
    <div
      className="absolute bg-black/60"
      aria-hidden
      style={{ top: `${focusRect.top}px`, left: `${focusRect.left + focusRect.width}px`, right: 0, height: `${focusRect.height}px` }}
    />
    {/* FRAME */}
    <div
      className="absolute rounded-md ring-2 ring-white"
      aria-hidden
      style={{ top: `${focusRect.top}px`, left: `${focusRect.left}px`, width: `${focusRect.width}px`, height: `${focusRect.height}px` }}
    />
  </div>
)}


Viktigt: contentRef har redan className="... relative ...", sÃ¥ overlayns absolute inset-0 fÃ¶rankras rÃ¤tt.

2) SÃ¤nk textlagrets â€œfÃ¶rsprÃ¥ngâ€ (sÃ¥ overlayn kan ligga Ã¶ver)

I din text-wrapper (diven med ref={textRef}) â€“ ta bort transform och/eller sÃ¤nk z-index. Ã„ndra denna bit:

<div
  ref={textRef}
  key={readingFocusMode ? "focus" : "normal"}
  data-reading-text=""
  style={{
    fontSize: `${activeSettings.fontSize}px`,
    lineHeight: `${activeSettings.lineHeight}`,
    position: "relative",
    zIndex: 10,
    mixBlendMode: "normal",
    paddingTop: 1,
    pointerEvents: "auto",
    transform: "translateZ(0)", // â¬…ï¸ TA BORT DENNA
  }}
  ...
/>


till:

<div
  ref={textRef}
  key={readingFocusMode ? "focus" : "normal"}
  data-reading-text=""
  style={{
    fontSize: `${activeSettings.fontSize}px`,
    lineHeight: `${activeSettings.lineHeight}`,
    position: "relative",
    zIndex: 1,              // â¬…ï¸ rÃ¤cker gott
    mixBlendMode: "normal",
    paddingTop: 1,
    pointerEvents: "auto",
    // ingen transform hÃ¤r
  }}
  ...
/>


Det Ã¤r allt. ğŸ”§
Med absolute inset-0 z-[100] pÃ¥ overlayn + ingen â€œtopp-stackingâ€ pÃ¥ texten syns skuggan och ramen direkt.

Om du hellre vill kÃ¶ra ren CSS istÃ¤llet fÃ¶r Tailwind-klasser, lÃ¤gg detta i ditt <style>-block och behÃ¥ll dina klassnamn:

.focus-overlay-container {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 100; /* hÃ¶gre Ã¤n textRef:s zIndex */
}
.rf-scrim { background: rgba(0,0,0,.6); }
.rf-frame { box-shadow: 0 0 0 2px #fff, 0 0 0 4px rgba(0,0,0,.2); border-radius: 8px; }


â€¦och lÃ¥t overlayn anvÃ¤nda dessa klasser (som du redan gÃ¶r).

BehÃ¶ver du att jag skickar en komplett â€œfÃ¶re/efterâ€-diff pÃ¥ hela komponenten, sÃ¤g till sÃ¥ klipper jag den direkt.